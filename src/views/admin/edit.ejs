<%- include('../partials/head') %>
<link rel="stylesheet" href="/css/productCreate.css"> 
</head>
  <body>
    <%- include('../partials/header') %>
    <main class="container">
        
        
        <!-- Cuerpo principal -->
        <section class="row">
          <div class="card-body">
            <h2 class="display-4 text-white bg-info text-center pt-2">Actualizar un Producto</h2>
          </div>
        </section>

        <section class="bg-home pt-4">
            <div class="admin-product-form-container">
              <form action="/administrar/product/edit/<%= products.id%>?_method=PUT" method="POST" enctype="multipart/form-data" >
                <div class="form-fields" >
                    <div class="form-column">
                      <div class="form-group">
                          <input type="text" class="box" name="name" placeholder="Name" required="required" value="<%= products.name%>">
                      </div>
                      <div class="form-group">
                        <select class="box" id="category" name="category" required="required" value="">
                            <option selected disabled value>Seleccionar Categoría</option>
                            <% categories.forEach(category => { %>
                              <option value="<%= category.id %> "><%= category.category_name %> </option>
                              <% }) %> 
                        </select>
                      </div>
                      <div class="form-group">
                        <input type="number" class="box" name="price" placeholder="Indique el precio" required="required" value="<%= products.price%>">
                      </div>
                    </div>
                    <div class="form-column">
                      <div class="form-group">
                        <input type="number" class="box" name="discount" placeholder="0" required="required" value="<%=products.discount%>" min="0" max="50" step="5">
                       </div>
                        
                        <div class="">
                          <input type="text" class="box" name="brand" placeholder="Marca" required="required" value="<%= products.brand%>">
                        </div>
                        
                    </div>
                  </div>
                  <!--Aquí solicito la imagen-->
                  <div class="custom-file">
                    <figure>
                        <img  class="img-figure" src="/img/<%= products.image%>" alt="product <%= products.name%>">
                    </figure>
                    <input type="hidden"  name="oldImage"   value="<%= products.image%>">
                    <!--De esta forma logro conservar y que viaje la imagen anterior de esta forma evito que el usuario seleccione una imagen nuevamente, ( si no lo desea) -->
                    <input type="file" name="image" class="box" accept="image/png, image/jpeg, image/jpg" >
                </div>
                    <div class="form-group">
                      <textarea type="text" class="box" name="description" placeholder="description" required="required"><%= products.description%></textarea>
                  </div>
                        <div class="btn">
                            <button type="submit" class="btn-save">Actualizar</button>
                            <a href="/administrar">
                            <input type="button"  class="btn-back" value="Volver"></a>
                        </div>
                
                </form>
            </div>
        </section>
     </main>  
</body>
</html>